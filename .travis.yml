language: php

php:
  - 5.6
  - 7.0
  - 7.1
  - 7.2

install:
  - composer install

script:
  - emoji_support/vendor/bin/parallel-lint --exclude emoji_support/vendor .

before_deploy:
  - rm -rf emoji_support/vendor
  - zip -r 'Emoji Support' emoji_support

deploy:
  provider: releases
  api_key:
    secure: uGFn7OGyjzc5DMT49WoSv4jflCHXUmPGb+CpZXewONo3jtfnt75bNfEpmfHdCF3+DWoI7AfbUefNDOrRwCdezwnAZKhSmzphN9+ymOUAlJwu/bvFuKvOjFrPEwKFLGWNaMQ0J/ez6+8dP7/QOoq01ejRbiCg9UcU2Vlu/4rmeero85t7EnAoKo1NRHRnrn9c5KmBN0Cp4V/fRZlbxc0Q4mqbRrzEo4LThVL0df+iGZb+IsLNoMYuQZjVAiA0ra8wD/wT+XHwkAtNDt29ImB3YfcNTA9xWi2OmVZ17Ak0DLBhdpsSUoshxXbYBNuXec7PUV6zvx5pce0OQntmzFnq+THXll5iUq2HqikkzGpxUOaa0//F62E9jRCFTe3+vXFPkDpWk2mrmod5cG3JXTjx3eBguV1r+Xsn5zfze7xdRPCAZVsztYf2UH991EArsUP2zgxj0dhcGZhFaS+TMfDUXfEkX7arlqySbNbj4OtQAUJGHNlz/ms9le7Et13+9KWuvXzfR0u1LIMetf1IlLTy2uG+XCuuZKn1OKsynDw4CKgLnItEQ3wyfcpHUhluuNGM7pPljTgWFvEOK9pcCNlWtlMqma3Sqyvv5XISBiWbl3qwvzQDKGmNpnCp7D89OHy1R789aD1UgLyxCWmr+8jPGVPvD0dN9Gp0uxHvzdwXm4w=
  file: "Emoji Support.zip"
  skip_cleanup: true
  on:
    php: 7.1
    tags: true
    condition: $TRAVIS_PULL_REQUEST = false
    repo: ExpressionEngine/Emoji-Support
